(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[191],{6592:function(e,t,a){Promise.resolve().then(a.bind(a,4656))},5601:function(e,t){"use strict";function a(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4656:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return O}});var s=a(3827),n=a(7681),l=a.n(n),r=a(4090),i=a(3902),o=a(2926),c=a(2829);function d(e){let{symbol:t,theme:a="dark"}=e,n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=document.createElement("script");return e.src="https://s3.tradingview.com/tv.js",e.async=!0,e.onload=()=>{n.current&&window.TradingView&&new window.TradingView.widget({container_id:n.current.id,symbol:t,interval:"D",timezone:"Etc/UTC",theme:a,style:"1",locale:"en",toolbar_bg:"#1A1A1A",enable_publishing:!1,hide_top_toolbar:!1,hide_legend:!1,save_image:!1,backgroundColor:"#0A0A0A",gridColor:"rgba(74, 124, 89, 0.1)",width:"100%",height:"100%"})},document.head.appendChild(e),()=>{e.remove()}},[t,a]),(0,s.jsx)("div",{className:"w-full h-full bg-[#0A0A0A]",children:(0,s.jsx)("div",{id:"tradingview_widget",ref:n,className:"w-full h-full"})})}var u=a(3170),m=function(){for(var e,t,a=0,s="",n=arguments.length;a<n;a++)(e=arguments[a])&&(t=function e(t){var a,s,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(a=0;a<l;a++)t[a]&&(s=e(t[a]))&&(n&&(n+=" "),n+=s)}else for(s in t)t[s]&&(n&&(n+=" "),n+=s)}return n}(e))&&(s&&(s+=" "),s+=t);return s},x=a(3910);let p={LONG:["zheUSD","longBTC","longETH","longTSLA","longSP500"],STEAMED:["steamedETH","steamedBTC","steamedTSLA","steamedSP500","steamedETH-DOWN","steamedBTC-DOWN","steamedTSLA-DOWN","steamedSP500-DOWN"]},g=[{inputs:[],name:"leverageRatio",outputs:[{type:"uint256",name:""}],stateMutability:"view",type:"function"},{inputs:[],name:"mintPeggedTokenIncentiveRatio",outputs:[{type:"int256",name:""}],stateMutability:"view",type:"function"},{inputs:[],name:"redeemPeggedTokenIncentiveRatio",outputs:[{type:"int256",name:""}],stateMutability:"view",type:"function"},{inputs:[{name:"collateralIn",type:"uint256"},{name:"receiver",type:"address"},{name:"minPeggedOut",type:"uint256"}],name:"mintPeggedToken",outputs:[{type:"uint256",name:"peggedAmount"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"peggedIn",type:"uint256"},{name:"receiver",type:"address"},{name:"minCollateralOut",type:"uint256"}],name:"redeemPeggedToken",outputs:[{type:"uint256",name:"collateralAmount"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"collateralIn",type:"uint256"},{name:"receiver",type:"address"},{name:"minLeveragedOut",type:"uint256"}],name:"mintLeveragedToken",outputs:[{type:"uint256",name:"leveragedAmount"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"leveragedIn",type:"uint256"},{name:"receiver",type:"address"},{name:"minCollateralOut",type:"uint256"}],name:"redeemLeveragedToken",outputs:[{type:"uint256",name:"collateralAmount"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"collateralAmount",type:"uint256"}],name:"calculateMintPeggedTokenOutput",outputs:[{type:"uint256",name:"peggedAmount"}],stateMutability:"view",type:"function"},{inputs:[{name:"peggedAmount",type:"uint256"}],name:"calculateRedeemPeggedTokenOutput",outputs:[{type:"uint256",name:"collateralAmount"}],stateMutability:"view",type:"function"},{inputs:[{name:"collateralAmount",type:"uint256"}],name:"calculateMintLeveragedTokenOutput",outputs:[{type:"uint256",name:"leveragedAmount"}],stateMutability:"view",type:"function"},{inputs:[{name:"leveragedAmount",type:"uint256"}],name:"calculateRedeemLeveragedTokenOutput",outputs:[{type:"uint256",name:"collateralAmount"}],stateMutability:"view",type:"function"},{inputs:[{name:"amount",type:"uint256"}],name:"mintPeggedTokenDryRun",outputs:[{type:"int256",name:"incentiveRatio"},{type:"uint256",name:"collateralUsed"},{type:"uint256",name:"peggedMinted"},{type:"uint256",name:"fee"},{type:"uint256",name:"reserveCollateralUsed"},{type:"uint256",name:"price"}],stateMutability:"view",type:"function"},{inputs:[{name:"peggedIn",type:"uint256"}],name:"redeemPeggedTokenDryRun",outputs:[{type:"int256",name:"incentiveRatio"},{type:"uint256",name:"peggedRedeemed"},{type:"uint256",name:"collateralReturned"},{type:"uint256",name:"fee"},{type:"uint256",name:"reserveCollateralUsed"},{type:"uint256",name:"price"}],stateMutability:"view",type:"function"},{inputs:[{name:"leveragedIn",type:"uint256"}],name:"redeemLeveragedTokenDryRun",outputs:[{type:"int256",name:"incentiveRatio"},{type:"uint256",name:"leveragedRedeemed"},{type:"uint256",name:"collateralReturned"},{type:"uint256",name:"fee"},{type:"uint256",name:"reserveCollateralUsed"},{type:"uint256",name:"price"}],stateMutability:"view",type:"function"},{inputs:[{name:"collateralIn",type:"uint256"}],name:"mintLeveragedTokenDryRun",outputs:[{type:"int256",name:"incentiveRatio"},{type:"uint256",name:"collateralUsed"},{type:"uint256",name:"leveragedMinted"},{type:"uint256",name:"fee"},{type:"uint256",name:"reserveCollateralUsed"},{type:"uint256",name:"price"}],stateMutability:"view",type:"function"}],f=[{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{type:"uint256",name:""}],stateMutability:"view",type:"function"},{inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],name:"approve",outputs:[{type:"bool",name:""}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{type:"uint256",name:""}],stateMutability:"view",type:"function"}],h=e=>("bigint"==typeof e&&(e=Number(e)/1e18),"string"==typeof e&&(e=Number(e)),isNaN(e))?"-":0===e?"0":e%1==0?e.toString():e.toLocaleString("en-US",{maximumFractionDigits:6}).replace(/\.?0+$/,""),b=e=>!e||e>BigInt("1"+"0".repeat(30))?"-":(Number(e)/1e18).toFixed(2)+"x",v=e=>{if(!e)return"-";let t=Number(e)/1e18;return t>0?"+".concat((100*t).toFixed(2),"%"):"".concat((100*t).toFixed(2),"%")},y=e=>{if(!e)return"-";try{return Number((0,o.d)(e)).toFixed(6)}catch(e){return"-"}};var N=e=>{var t,a,n,l,c,d,u;let{geoClassName:N,currentMarket:j,isConnected:F,userAddress:w}=e,[A,k]=(0,r.useState)(!1),{chain:C}=(0,i.useNetwork)(),{data:T}=(0,i.useWalletClient)({chainId:null==C?void 0:C.id}),E=(0,i.usePublicClient)({chainId:null==C?void 0:C.id}),[D,B]=(0,r.useState)(!1),[O,M]=(0,r.useState)("LONG"),[L,S]=(0,r.useState)(!0),[R,G]=(0,r.useState)(""),[_,U]=(0,r.useState)(""),[I,P]=(0,r.useState)(!1),[V,W]=(0,r.useState)(!1),[H,z]=(0,r.useState)(!1),[X,Z]=(0,r.useState)(null),[Y,$]=(0,r.useState)(p[O][0]),{data:q}=(0,i.useContractReads)({contracts:[{address:j.addresses.collateralToken,abi:f,functionName:"balanceOf",args:w?[w]:void 0},{address:j.addresses.collateralToken,abi:f,functionName:"allowance",args:w?[w,j.addresses.minter]:void 0}],watch:!0,enabled:A&&!!w}),{data:J}=(0,i.useContractReads)({contracts:[{address:j.addresses.peggedToken,abi:f,functionName:"balanceOf",args:w?[w]:void 0},{address:j.addresses.peggedToken,abi:f,functionName:"allowance",args:w?[w,j.addresses.minter]:void 0}],watch:!0,enabled:A&&!!w&&"LONG"===O}),{data:K}=(0,i.useContractReads)({contracts:[{address:j.addresses.leveragedToken,abi:f,functionName:"balanceOf",args:w?[w]:void 0},{address:j.addresses.leveragedToken,abi:f,functionName:"allowance",args:w?[w,j.addresses.minter]:void 0}],watch:!0,enabled:A&&!!w&&"STEAMED"===O}),{data:Q}=(0,i.useContractReads)({contracts:[{address:j.addresses.minter,abi:g,functionName:"leverageRatio"},{address:j.addresses.minter,abi:g,functionName:"mintPeggedTokenIncentiveRatio"},{address:j.addresses.minter,abi:g,functionName:"redeemPeggedTokenIncentiveRatio"}],watch:!0,enabled:A}),{data:ee,refetch:et}=(0,i.useContractRead)({address:j.addresses.minter,abi:g,functionName:"mintPeggedTokenDryRun",args:[R?(0,x.f)(R):BigInt(0)],watch:!0,enabled:A&&L&&"LONG"===O&&!!R&&parseFloat(R)>0}),{data:ea,error:es}=(0,i.useContractRead)({address:j.addresses.minter,abi:g,functionName:"redeemPeggedTokenDryRun",args:[R?(0,x.f)(R):BigInt(0)],watch:!0,enabled:A&&!L&&"LONG"===O&&!!R&&parseFloat(R)>0}),{data:en,error:el}=(0,i.useContractRead)({address:j.addresses.minter,abi:g,functionName:"redeemLeveragedTokenDryRun",args:[R?(0,x.f)(R):BigInt(0)],watch:!0,enabled:A&&!L&&"STEAMED"===O&&!!R&&parseFloat(R)>0}),{data:er,refetch:ei}=(0,i.useContractRead)({address:j.addresses.minter,abi:g,functionName:"mintLeveragedTokenDryRun",args:[R?(0,x.f)(R):BigInt(0)],watch:!0,enabled:A&&L&&"STEAMED"===O&&!!R&&parseFloat(R)>0});(0,r.useEffect)(()=>{if(L&&"LONG"===O&&R&&Array.isArray(ee)&&ee.length>1)try{let e=(0,x.f)(R),t=ee[1];"bigint"==typeof t&&t<e&&(W(!0),setTimeout(()=>W(!1),500))}catch(e){console.error("Error parsing input amount for shake effect:",e)}},[R,ee,L,O,W]);let{data:eo,refetch:ec}=(0,i.useContractReads)({contracts:[{address:j.addresses.minter,abi:g,functionName:L?"LONG"===O?"calculateMintPeggedTokenOutput":"calculateMintLeveragedTokenOutput":"LONG"===O?"calculateRedeemPeggedTokenOutput":"calculateRedeemLeveragedTokenOutput",args:[R?(0,x.f)(R):BigInt(0)]}],enabled:A&&!!R&&parseFloat(R)>0&&!(L&&"LONG"===O),watch:!0}),{writeAsync:ed}=(0,i.useContractWrite)({address:j.addresses.minter,abi:g,functionName:"mintPeggedToken"}),{writeAsync:eu}=(0,i.useContractWrite)({address:j.addresses.minter,abi:g,functionName:"redeemPeggedToken"}),{writeAsync:em}=(0,i.useContractWrite)({address:j.addresses.minter,abi:g,functionName:"mintLeveragedToken"}),{writeAsync:ex}=(0,i.useContractWrite)({address:j.addresses.minter,abi:g,functionName:"redeemLeveragedToken"}),{writeAsync:ep}=(0,i.useContractWrite)({address:j.addresses.collateralToken,abi:f,functionName:"approve"}),{writeAsync:eg}=(0,i.useContractWrite)({address:j.addresses.peggedToken,abi:f,functionName:"approve"}),{writeAsync:ef}=(0,i.useContractWrite)({address:j.addresses.leveragedToken,abi:f,functionName:"approve"});(0,r.useEffect)(()=>k(!0),[]),(0,r.useEffect)(()=>{if(L){var e,t;if("LONG"===O&&Array.isArray(ee)&&ee.length>2){let e=ee[2];"bigint"==typeof e?U((0,o.d)(e)):U("")}else if("STEAMED"===O&&Array.isArray(er)&&er.length>2){let e=er[2];"bigint"==typeof e?U((0,o.d)(e)):U("")}else eo&&(null===(e=eo[0])||void 0===e?void 0:e.status)==="success"&&"bigint"==typeof(null===(t=eo[0])||void 0===t?void 0:t.result)?U((0,o.d)(eo[0].result)):R||U("")}else if("LONG"===O&&Array.isArray(ea)&&ea.length>2){let e=ea[2];"bigint"==typeof e?U((0,o.d)(e)):U("")}else if("STEAMED"===O&&Array.isArray(en)&&en.length>2){let e=en[2];"bigint"==typeof e?U((0,o.d)(e)):U("")}else R||U("")},[ee,ea,en,eo,R,L,O,U]),(0,r.useEffect)(()=>{G(""),U("")},[L,O,j.id]);let eh=e=>{let t=e.target.value;/^\d*\.?\d*$/.test(t)&&(G(t),t&&0!==parseFloat(t)||U(""))},eb=e=>{let t=e.target.value;/^\d*\.?\d*$/.test(t)&&(U(t),t&&0!==parseFloat(t)||G(""))},ev=()=>{var e,t,a;let s=L?null==q?void 0:null===(e=q[0])||void 0===e?void 0:e.result:"LONG"===O?null==J?void 0:null===(t=J[0])||void 0===t?void 0:t.result:null==K?void 0:null===(a=K[0])||void 0===a?void 0:a.result;"bigint"==typeof s&&G((0,o.d)(s))},ey=async e=>{if(e.preventDefault(),!(!R||0>=parseFloat(R))&&w&&T){P(!0),Z(null);try{var t,a,s,n,l,r;let e=(0,x.f)(R),i=BigInt(0),o,c;if(L?(i=null!==(a=null==q?void 0:null===(t=q[1])||void 0===t?void 0:t.result)&&void 0!==a?a:BigInt(0),o=ep):"LONG"===O?(i=null!==(n=null==J?void 0:null===(s=J[1])||void 0===s?void 0:s.result)&&void 0!==n?n:BigInt(0),o=eg):(i=null!==(r=null==K?void 0:null===(l=K[1])||void 0===l?void 0:l.result)&&void 0!==r?r:BigInt(0),o=ef),c=[j.addresses.minter,e],i<e){Z("approval");let e=await o({args:c});e&&e.hash&&E?await E.waitForTransactionReceipt({hash:e.hash}):await new Promise(e=>setTimeout(e,5e3))}if(Z("mintOrRedeem"),L){if("LONG"===O){let t=e;Array.isArray(ee)&&ee.length>2&&"bigint"==typeof ee[2]&&(t=ee[2]),await ed({args:[e,w,t]})}else{let t=e;if(Array.isArray(er)&&er.length>2&&"bigint"==typeof er[2])t=er[2];else if(_&&parseFloat(_)>0)try{t=(0,x.f)(_)}catch(e){console.error("Error parsing outputAmount for minLeveragedOut:",e)}await em({args:[e,w,t]})}}else if("LONG"===O){let t=e;Array.isArray(ea)&&ea.length>2&&"bigint"==typeof ea[2]&&(t=ea[2]),await eu({args:[e,w,t]})}else{let t=e;Array.isArray(en)&&en.length>2&&"bigint"==typeof en[2]&&(t=en[2]),await ex({args:[e,w,t]})}G(""),U("")}catch(e){if(console.error("Transaction failed:",e),e&&"object"==typeof e&&null!==e){for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&console.error("[ERROR DETAIL] ".concat(t,":"),e[t]);try{console.error("[ERROR STRINGIFIED]",JSON.stringify(e,Object.getOwnPropertyNames(e)))}catch(e){console.error("[ERROR STRINGIFY FAILED]",e)}}alert("Transaction failed. See console for details.")}finally{P(!1),Z(null)}}},eN=null==Q?void 0:null===(t=Q[0])||void 0===t?void 0:t.result,ej=null==Q?void 0:null===(a=Q[1])||void 0===a?void 0:a.result,eF=null==Q?void 0:null===(n=Q[2])||void 0===n?void 0:n.result;return A?(0,s.jsx)("div",{className:"bg-neutral-800 p-4 shadow-custom-dark",children:(0,s.jsxs)("div",{className:"w-full max-w-xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex border-b border-[#333] mb-6",children:[(0,s.jsx)("button",{onClick:()=>{M("LONG"),B(!1)},className:m("px-6 py-2 text-lg font-medium transition-all duration-200 ease-in-out outline-none focus:outline-none border-b-2 ".concat(N),"LONG"===O?"border-[#4A7C59] text-[#4A7C59]":"border-transparent text-[#F5F5F5]/70 hover:text-[#F5F5F5]"),children:"PEGGED"}),(0,s.jsx)("button",{onClick:()=>{M("STEAMED"),B(!0)},className:m("px-6 py-2 text-lg font-medium transition-all duration-200 ease-in-out outline-none focus:outline-none border-b-2 ".concat(N),"STEAMED"===O?"border-[#4A7C59] text-[#4A7C59]":"border-transparent text-[#F5F5F5]/70 hover:text-[#F5F5F5]"),children:"LEVERAGE"})]}),(0,s.jsx)("div",{className:"relative [perspective:1000px] w-full",children:(0,s.jsxs)("div",{className:"relative [transform-style:preserve-3d] transition-transform duration-500 h-[600px]",style:{transform:D?"rotateY(180deg)":"rotateY(0deg)"},children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-[#0A0A0A]/90 before:absolute before:inset-0 before:bg-black/90 shadow-[0_0_15px_rgba(74,124,89,0.1)] [backface-visibility:hidden] transform-gpu",children:(0,s.jsx)("div",{className:"relative z-10 h-full transition-opacity duration-50 delay-[145ms] ".concat("LONG"===O?"opacity-100":"opacity-0"),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"text-center mb-6",children:(0,s.jsx)("h1",{className:"text-3xl text-[#4A7C59] mb-1 ".concat(N),children:"zheUSD"})}),(0,s.jsx)("form",{onSubmit:ey,className:"space-y-8",children:(0,s.jsxs)("div",{className:"space-y-6 relative",children:[(0,s.jsxs)("div",{className:"relative h-[360px]",children:[" ",(0,s.jsxs)("div",{className:"absolute w-full space-y-2 transition-all duration-200 ".concat(L?"translate-y-0":"translate-y-[calc(260%+2rem)]"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"text-sm text-[#F5F5F5]/80",children:"From"}),(0,s.jsxs)("span",{className:"text-sm text-[#F5F5F5]/60",children:["Balance:"," ",y(null==q?void 0:null===(l=q[0])||void 0===l?void 0:l.result)," ","wstETH"]})]}),(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)("input",{type:"text",value:L?R:_,onChange:L?eh:void 0,placeholder:"0.0",className:"w-full bg-[#202020] text-[#F5F5F5] border border-[#4A7C59]/30 focus:border-[#4A7C59] outline-none transition-all p-4 pr-24",readOnly:!L}),(0,s.jsxs)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex flex-col items-end",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[L&&(0,s.jsx)("button",{type:"button",onClick:ev,className:"text-[#4A7C59] hover:text-[#3A6147] text-sm transition-colors",children:"MAX"}),(0,s.jsx)("span",{className:"text-[#F5F5F5]/70",children:"wstETH"})]}),L&&(0,s.jsx)("button",{onClick:()=>window.open("https://swap.defillama.com/?chain=ethereum&from=0x0000000000000000000000000000000000000000&tab=swap&to=0x7f39c581f595b53c5cb19bd0b3f8da6c935e2ca0","_blank"),className:"text-[#4A7C59] hover:text-[#3A6147] text-[10px] transition-colors mt-1",children:"Get wstETH"})]})]}),L&&"LONG"===O&&(0,s.jsxs)("div",{className:V?"text-sm text-red-500 font-semibold mt-1":"text-sm text-[#F5F5F5]/60 mt-1",children:["Collateral Needed:"," ",R&&0!==parseFloat(R)&&Array.isArray(ee)&&ee.length>1&&"bigint"==typeof ee[1]?h(ee[1]):"-"]})]}),(0,s.jsxs)("div",{className:"absolute top-[160px] left-0 right-0 flex items-center w-full",children:[(0,s.jsxs)("div",{className:"text-xs text-left min-w-[80px] flex items-center justify-start gap-1",children:[!L&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-[#F5F5F5]/70",children:"Fee:"}),(0,s.jsx)("span",{className:"text-[#4A7C59]",children:"STEAMED"===O&&Array.isArray(en)&&en.length>0&&"bigint"==typeof en[0]?v(en[0]):"LONG"===O?v(eF):"-"})]}),L&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-[#F5F5F5]/70",children:"Fee:"}),(0,s.jsx)("span",{className:"text-[#4A7C59]",children:"LONG"===O?v(ej):"STEAMED"===O&&Array.isArray(er)&&er.length>0&&"bigint"==typeof er[0]?v(er[0]):"-"})]})]}),(0,s.jsxs)("div",{className:"flex-grow flex items-center justify-center gap-x-4",children:[(0,s.jsx)("span",{className:"text-sm font-medium transition-colors duration-200 ".concat(L?"text-[#4A7C59]":"text-[#F5F5F5]/40"),children:"Mint"}),(0,s.jsxs)("button",{type:"button",onClick:()=>S(!L),className:"group relative flex items-center justify-center px-2 py-2 mx-2 bg-[#4A7C59] hover:bg-[#3A6147] transition-colors",children:[(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-5 h-5 transition-transform duration-200 ".concat(L?"rotate-0":"rotate-180"),children:(0,s.jsx)("path",{d:"M12 4V20M19 13L12 20L5 13",stroke:"#F5F5F5",strokeOpacity:L?"1":"0.3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-5 h-5 transition-transform duration-200 ".concat(L?"rotate-0":"rotate-180"),children:(0,s.jsx)("path",{d:"M12 20V4M5 11L12 4L19 11",stroke:"#F5F5F5",strokeOpacity:L?"0.3":"1",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),(0,s.jsx)("span",{className:"text-sm font-medium transition-colors duration-200 ".concat(L?"text-[#F5F5F5]/40":"text-[#4A7C59]"),children:"Redeem"})]}),(0,s.jsx)("div",{className:"min-w-[80px]"})]}),(0,s.jsxs)("div",{className:"absolute w-full space-y-2 transition-all duration-200 ".concat(L?"translate-y-[calc(260%+2rem)]":"translate-y-0"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"text-sm text-[#F5F5F5]/80",children:"To"}),(0,s.jsxs)("span",{className:"text-sm text-[#F5F5F5]/60",children:["Balance:"," ",y(null==J?void 0:null===(c=J[0])||void 0===c?void 0:c.result)," ","zheUSD"]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"number",value:L?_:R,onChange:L?eb:eh,placeholder:"0.0",className:"w-full p-4 bg-[#202020] text-[#F5F5F5] border border-[#4A7C59]/30 focus:border-[#4A7C59] outline-none transition-all pr-24 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",readOnly:L}),(0,s.jsxs)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[!L&&"LONG"===O&&(0,s.jsx)("button",{type:"button",onClick:ev,className:"text-[#4A7C59] hover:text-[#3A6147] text-sm transition-colors",children:"MAX"}),(0,s.jsx)("span",{className:"text-[#F5F5F5]/70",children:"zheUSD"})]})]}),!L&&"LONG"===O&&es&&(0,s.jsx)("div",{className:"text-sm text-red-500 font-semibold mt-1",children:"Invalid amount or not enough balance"})]})]}),(0,s.jsx)("div",{className:"relative [perspective:1000px]",children:F?I&&"approval"===X?(0,s.jsx)("button",{type:"submit",disabled:!0,className:"w-full p-4 text-center text-2xl bg-[#1F3529] text-[#4A7C59] cursor-not-allowed ".concat(N),children:"Waiting for approval transaction..."}):I&&"mintOrRedeem"===X?(0,s.jsx)("button",{type:"submit",disabled:!0,className:"w-full p-4 text-center text-2xl bg-[#1F3529] text-[#4A7C59] cursor-not-allowed ".concat(N),children:"Waiting for mint/redeem transaction..."}):(0,s.jsxs)("div",{className:"[transform-style:preserve-3d] transition-transform duration-200 relative h-[60px]",style:{transformOrigin:"center center",transform:L?"rotateX(0deg)":"rotateX(180deg)"},children:[(0,s.jsx)("button",{onClick:ey,disabled:!R||0>=parseFloat(R),className:"w-full p-4 text-center text-2xl bg-[#4A7C59] hover:bg-[#5A8C69] text-white absolute inset-0 [backface-visibility:hidden] [transform-style:preserve-3d] shadow-[0_0_20px_rgba(74,124,89,0.2)] disabled:bg-[#1F3529] disabled:text-[#4A7C59] disabled:cursor-not-allowed ".concat(N),children:(0,s.jsx)("span",{className:N,children:!R||0>=parseFloat(R)?"Enter Amount":L?"MINT":"REDEEM"})}),(0,s.jsx)("button",{onClick:ey,disabled:!R||0>=parseFloat(R),className:"w-full p-4 text-center text-2xl bg-[#4A7C59] hover:bg-[#5A8C69] text-white absolute inset-0 [transform:rotateX(180deg)] [backface-visibility:hidden] [transform-style:preserve-3d] disabled:bg-[#1F3529] disabled:text-[#4A7C59] disabled:cursor-not-allowed ".concat(N),children:(0,s.jsx)("span",{className:N,children:!R||0>=parseFloat(R)?"Enter Amount":L?"MINT":"REDEEM"})})]}):(0,s.jsx)("button",{type:"submit",disabled:!0,className:"w-full p-4 text-center text-2xl bg-[#1F3529] text-[#4A7C59] cursor-not-allowed ".concat(N),children:"Connect Wallet"})})]})})]})})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-[#0A0A0A]/90 before:absolute before:inset-0 before:bg-black/90 shadow-[0_0_15px_rgba(74,124,89,0.1)] [backface-visibility:hidden] [transform:rotateY(180deg)] transform-gpu",children:(0,s.jsx)("div",{className:"relative z-10 h-full transition-opacity duration-50 delay-[145ms] ".concat("STEAMED"===O?"opacity-100":"opacity-0"),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)("h1",{className:"text-3xl text-[#4A7C59] mb-1 ".concat(N),children:"steamedETH "}),(0,s.jsxs)("div",{className:"text-[#F5F5F5]/50 text-sm -mt-1",children:[(0,s.jsx)("span",{className:"block text-[10px] mb-0.5",children:"Leverage"}),b(eN)]})]}),(0,s.jsx)("form",{onSubmit:ey,className:"space-y-8 mt-2",children:(0,s.jsxs)("div",{className:"space-y-6 relative",children:[(0,s.jsxs)("div",{className:"relative h-[360px]",children:[" ",(0,s.jsxs)("div",{className:"absolute w-full space-y-2 transition-all duration-200 ".concat(L?"translate-y-0":"translate-y-[calc(260%+2rem)]"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"text-sm text-[#F5F5F5]/80",children:"From"}),(0,s.jsxs)("span",{className:"text-sm text-[#F5F5F5]/60",children:["Balance:"," ",y(null==q?void 0:null===(d=q[0])||void 0===d?void 0:d.result)," ","wstETH"]})]}),(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)("input",{type:"text",value:L?R:_,onChange:L?eh:void 0,placeholder:"0.0",className:"w-full bg-[#202020] text-[#F5F5F5] border border-[#4A7C59]/30 focus:border-[#4A7C59] outline-none transition-all p-4 pr-24",readOnly:!L}),(0,s.jsxs)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex flex-col items-end",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[L&&(0,s.jsx)("button",{type:"button",onClick:ev,className:"text-[#4A7C59] hover:text-[#3A6147] text-sm transition-colors",children:"MAX"}),(0,s.jsx)("span",{className:"text-[#F5F5F5]/70",children:"wstETH"})]}),L&&(0,s.jsx)("button",{onClick:()=>window.open("https://swap.defillama.com/?chain=ethereum&from=0x0000000000000000000000000000000000000000&tab=swap&to=0x7f39c581f595b53c5cb19bd0b3f8da6c935e2ca0","_blank"),className:"text-[#4A7C59] hover:text-[#3A6147] text-[10px] transition-colors mt-1",children:"Get wstETH"})]})]})]}),(0,s.jsxs)("div",{className:"absolute top-[160px] left-0 right-0 flex items-center w-full",children:[(0,s.jsxs)("div",{className:"text-xs text-left min-w-[80px] flex items-center justify-start gap-1",children:[!L&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-[#F5F5F5]/70",children:"Fee:"}),(0,s.jsx)("span",{className:"text-[#4A7C59]",children:"STEAMED"===O&&Array.isArray(en)&&en.length>0&&"bigint"==typeof en[0]?v(en[0]):"LONG"===O?v(eF):"-"})]}),L&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-[#F5F5F5]/70",children:"Fee:"}),(0,s.jsx)("span",{className:"text-[#4A7C59]",children:"LONG"===O?v(ej):"STEAMED"===O&&Array.isArray(er)&&er.length>0&&"bigint"==typeof er[0]?v(er[0]):"-"})]})]}),(0,s.jsxs)("div",{className:"flex-grow flex items-center justify-center gap-x-4",children:[(0,s.jsx)("span",{className:"text-sm font-medium transition-colors duration-200 ".concat(L?"text-[#4A7C59]":"text-[#F5F5F5]/40"),children:"Mint"}),(0,s.jsxs)("button",{type:"button",onClick:()=>S(!L),className:"group relative flex items-center justify-center px-2 py-2 mx-2 bg-[#4A7C59] hover:bg-[#3A6147] transition-colors",children:[(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-5 h-5 transition-transform duration-200 ".concat(L?"rotate-0":"rotate-180"),children:(0,s.jsx)("path",{d:"M12 4V20M19 13L12 20L5 13",stroke:"#F5F5F5",strokeOpacity:L?"1":"0.3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-5 h-5 transition-transform duration-200 ".concat(L?"rotate-0":"rotate-180"),children:(0,s.jsx)("path",{d:"M12 20V4M5 11L12 4L19 11",stroke:"#F5F5F5",strokeOpacity:L?"0.3":"1",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),(0,s.jsx)("span",{className:"text-sm font-medium transition-colors duration-200 ".concat(L?"text-[#F5F5F5]/40":"text-[#4A7C59]"),children:"Redeem"})]}),(0,s.jsx)("div",{className:"min-w-[80px]"})]}),(0,s.jsxs)("div",{className:"absolute w-full space-y-2 transition-all duration-200 ".concat(L?"translate-y-[calc(260%+2rem)]":"translate-y-0"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"text-sm text-[#F5F5F5]/80",children:"To"}),(0,s.jsxs)("span",{className:"text-sm text-[#F5F5F5]/60",children:["Balance:"," ",y(null==K?void 0:null===(u=K[0])||void 0===u?void 0:u.result)," ","steamedETH "]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"number",value:L?_:R,onChange:L?eb:eh,placeholder:"0.0",className:"w-full p-4 bg-[#202020] text-[#F5F5F5] border border-[#4A7C59]/30 focus:border-[#4A7C59] outline-none transition-all pr-24 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",readOnly:L}),(0,s.jsxs)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[!L&&"STEAMED"===O&&(0,s.jsx)("button",{type:"button",onClick:ev,className:"text-[#4A7C59] hover:text-[#3A6147] text-sm transition-colors",children:"MAX"}),(0,s.jsx)("span",{className:"text-[#F5F5F5]/70",children:"steamedETH"})]})]}),!L&&"STEAMED"===O&&el&&(0,s.jsx)("div",{className:"text-sm text-red-500 font-semibold mt-1",children:"Invalid amount or not enough balance"})]})]}),(0,s.jsx)("div",{className:"relative [perspective:1000px]",children:F?I&&"approval"===X?(0,s.jsx)("button",{type:"submit",disabled:!0,className:"w-full p-4 text-center text-2xl bg-[#1F3529] text-[#4A7C59] cursor-not-allowed ".concat(N),children:"Waiting for approval transaction..."}):I&&"mintOrRedeem"===X?(0,s.jsx)("button",{type:"submit",disabled:!0,className:"w-full p-4 text-center text-2xl bg-[#1F3529] text-[#4A7C59] cursor-not-allowed ".concat(N),children:"Waiting for mint/redeem transaction..."}):(0,s.jsxs)("div",{className:"[transform-style:preserve-3d] transition-transform duration-200 relative h-[60px]",style:{transformOrigin:"center center",transform:L?"rotateX(0deg)":"rotateX(180deg)"},children:[(0,s.jsx)("button",{onClick:ey,disabled:!R||0>=parseFloat(R),className:"w-full p-4 text-center text-2xl bg-[#4A7C59] hover:bg-[#5A8C69] text-white absolute inset-0 [backface-visibility:hidden] [transform-style:preserve-3d] shadow-[0_0_20px_rgba(74,124,89,0.2)] disabled:bg-[#1F3529] disabled:text-[#4A7C59] disabled:cursor-not-allowed ".concat(N),children:(0,s.jsx)("span",{className:N,children:!R||0>=parseFloat(R)?"Enter Amount":L?"MINT":"REDEEM"})}),(0,s.jsx)("button",{onClick:ey,disabled:!R||0>=parseFloat(R),className:"w-full p-4 text-center text-2xl bg-[#4A7C59] hover:bg-[#5A8C69] text-white absolute inset-0 [transform:rotateX(180deg)] [backface-visibility:hidden] [transform-style:preserve-3d] disabled:bg-[#1F3529] disabled:text-[#4A7C59] disabled:cursor-not-allowed ".concat(N),children:(0,s.jsx)("span",{className:N,children:!R||0>=parseFloat(R)?"Enter Amount":L?"MINT":"REDEEM"})})]}):(0,s.jsx)("button",{type:"submit",disabled:!0,className:"w-full p-4 text-center text-2xl bg-[#1F3529] text-[#4A7C59] cursor-not-allowed ".concat(N),children:"Connect Wallet"})})]})})]})})})]})}),H&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:(0,s.jsxs)("div",{className:"bg-[#181818] p-8 rounded-lg shadow-lg w-full max-w-md",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4 text-[#F5F5F5]",children:"Confirm Mint Transaction"}),(0,s.jsxs)("div",{className:"space-y-2 text-[#F5F5F5] text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Collateral Used:"}),(0,s.jsx)("span",{})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Fee:"}),(0,s.jsx)("span",{})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Oracle Price:"}),(0,s.jsx)("span",{})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Pegged Minted:"}),(0,s.jsx)("span",{})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,s.jsx)("button",{className:"px-4 py-2 bg-[#2A2A2A] text-[#F5F5F5] rounded hover:bg-[#333]",onClick:()=>z(!1),children:"Cancel"}),(0,s.jsx)("button",{className:"px-4 py-2 bg-[#4A7C59] text-white rounded hover:bg-[#5A8C69] font-bold",children:"Confirm"})]})]})})]})}):(0,s.jsx)("div",{className:"bg-[#1A1A1A] p-6 rounded-lg shadow-custom-dark",children:(0,s.jsx)("h2",{className:"text-2xl text-[#F5F5F5] mb-4 ".concat(N),children:"Loading Form..."})})},j=a(5601),F=a.n(j);let w=[{inputs:[],name:"collateralTokenBalance",outputs:[{type:"uint256",name:""}],stateMutability:"view",type:"function"},{inputs:[],name:"peggedTokenBalance",outputs:[{type:"uint256",name:""}],stateMutability:"view",type:"function"},{inputs:[],name:"leveragedTokenBalance",outputs:[{type:"uint256",name:""}],stateMutability:"view",type:"function"},{inputs:[],name:"collateralRatio",outputs:[{type:"uint256",name:""}],stateMutability:"view",type:"function"},{inputs:[],name:"peggedTokenPrice",outputs:[{type:"uint256",name:""}],stateMutability:"view",type:"function"},{inputs:[],name:"leveragedTokenPrice",outputs:[{type:"uint256",name:""}],stateMutability:"view",type:"function"}],A=[{name:"latestAnswer",outputs:[{type:"int256"}],stateMutability:"view",type:"function",inputs:[]},{name:"decimals",outputs:[{type:"uint8"}],stateMutability:"view",type:"function",inputs:[]}];function k(e){if(!e)return console.log("[DEBUG] formatValue: value is undefined"),"-";console.log("[DEBUG] formatValue input:",e.toString());try{let t=(0,o.d)(e);console.log("[DEBUG] formatValue after formatEther:",t);let a=parseFloat(t);if(isNaN(a))return console.log("[DEBUG] formatValue: parsed number is NaN"),"-";let s=a.toFixed(4);return console.log("[DEBUG] formatValue final result:",s),s}catch(e){return console.error("[DEBUG] formatValue error:",e),"-"}}function C(e){var t,a,n,l,o,d,u,m,x;let{type:p,marketId:g="steth-usd",collateralTokenBalance:f}=e,[h,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{b(!0)},[]),console.log("[DEBUG] Value component type:",p),console.log("[DEBUG] Value component collateralTokenBalance:",f),console.log("[DEBUG] Value component mounted:",h);let v=c.Uu[g].addresses,y="collateralValue"===p?"collateralTokenBalance":"collateralTokens"===p?"collateralTokenBalance":"peggedValue"===p?"peggedTokenBalance":"peggedTokens"===p?"peggedTokenBalance":"leveragedValue"===p?"leveragedTokenBalance":"leveragedTokens"===p?"leveragedTokenBalance":"collateralRatio";console.log("[DEBUG] Contract call details:",{type:p,functionName:y,address:v.minter,isPeggedOrLeveraged:p.includes("pegged")||p.includes("leveraged")});let{data:N,isError:j,error:F}=(0,i.useContractReads)({contracts:"collateralValue"===p?[{address:v.minter,abi:w,functionName:y},{address:v.priceOracle,abi:A,functionName:"latestAnswer"},{address:v.priceOracle,abi:A,functionName:"decimals"}]:[{address:v.minter,abi:w,functionName:y}],watch:!0,enabled:h,select:e=>{var t,a;return console.log("[DEBUG] Raw contract read result:",{type:p,functionName:y,data:e,result:null==e?void 0:null===(t=e[0])||void 0===t?void 0:t.result,status:null==e?void 0:null===(a=e[0])||void 0===a?void 0:a.status}),e}});if((0,r.useEffect)(()=>{if(h){var e,t;console.log("[DEBUG] Detailed contract state for",p,":",{hasData:!!N,dataResult:null==N?void 0:null===(e=N[0])||void 0===e?void 0:e.result,dataStatus:null==N?void 0:null===(t=N[0])||void 0===t?void 0:t.status,isError:j,errorDetails:F,minterAddress:v.minter})}},[N,F,j,p,h,v.minter]),!h)return(0,s.jsx)(s.Fragment,{children:"-"});if("collateralTokens"===p&&void 0!==f){console.log("[DEBUG] Handling collateralTokens with balance:",f.toString());let e=k(f);return console.log("[DEBUG] Formatted collateral tokens value:",e),(0,s.jsx)(s.Fragment,{children:e})}if("collateralValue"===p){if(!(null==N?void 0:null===(t=N[0])||void 0===t?void 0:t.result))return console.log("[DEBUG] No collateral value data:",{type:p,functionName:y,hasData:!!N,isError:j,errorDetails:F}),(0,s.jsx)(s.Fragment,{children:"-"});let e=null===(a=N[0])||void 0===a?void 0:a.result,r=null===(n=N[1])||void 0===n?void 0:n.result,i=null===(l=N[2])||void 0===l?void 0:l.result;if(!e||!r||void 0===i)return console.log("[DEBUG] Missing required values for collateral value:",{hasTokenBal:!!e,hasPriceRaw:!!r,hasPriceDecimals:void 0!==i}),(0,s.jsx)(s.Fragment,{children:"-"});let o=Number(r*BigInt(10**(18-i))*e/BigInt(1e18))/1e18,c=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:4,maximumFractionDigits:4}).format(o);return(0,s.jsx)(s.Fragment,{children:c})}if("peggedTokens"===p||"leveragedTokens"===p){if(!(null==N?void 0:null===(o=N[0])||void 0===o?void 0:o.result))return console.log("[DEBUG] No token data:",{type:p,functionName:y,hasData:!!N,isError:j,errorDetails:F,rawData:N}),(0,s.jsx)(s.Fragment,{children:"-"});console.log("[DEBUG] Processing token data:",{type:p,rawResult:N[0].result.toString(),hasError:j,error:F});let e=k(N[0].result);return console.log("[DEBUG] Formatted token value:",e),(0,s.jsx)(s.Fragment,{children:e})}return"peggedValue"===p||"leveragedValue"===p?(null==N?void 0:null===(d=N[0])||void 0===d?void 0:d.result)?(0,s.jsx)(s.Fragment,{children:(e=>{if(!e||!h)return"-";let t=Number(e)/1e18;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:4,maximumFractionDigits:4}).format(t)})(N[0].result)}):(console.log("[DEBUG] No value data:",{type:p,functionName:y,hasData:!!N,isError:j,errorDetails:F,rawData:N}),(0,s.jsx)(s.Fragment,{children:"-"})):"collateralRatio"!==p?(null==N?void 0:null===(m=N[0])||void 0===m?void 0:m.result)?(0,s.jsx)(s.Fragment,{children:k(N[0].result)}):(0,s.jsx)(s.Fragment,{children:"-"}):(null==N?void 0:null===(u=N[0])||void 0===u?void 0:u.result)?(0,s.jsx)(s.Fragment,{children:!(x=N[0].result)||!h||x>BigInt("1"+"0".repeat(30))?"-":(Number(x)/1e18*100).toFixed(4)+"%"}):(0,s.jsx)(s.Fragment,{children:"-"})}var T=Object.assign(function(e){let{marketId:t,collateralTokenBalance:a,geoClassName:n}=e;console.log("[DEBUG SystemHealth.tsx] received geoClassName:",n);let[l,i]=(0,r.useState)(!1);(0,r.useEffect)(()=>{i(!0)},[]);let o=c.Uu[t],d=null==o?void 0:o.addresses.priceOracle,u=null==o?void 0:o.name;return(console.log("[DEBUG] SystemHealth mounted:",l),console.log("[DEBUG] SystemHealth collateralTokenBalance:",a),console.log("[DEBUG] SystemHealth collateralTokenBalance type:",typeof a),l)?(0,s.jsx)("div",{className:"bg-neutral-800 p-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:[(0,s.jsxs)("div",{className:"bg-black p-3",children:[(0,s.jsx)("div",{className:"text-[#F5F5F5]/70 text-xs mb-1 text-center",children:"Total Collateral"}),(0,s.jsx)("div",{className:"text-2xl font-medium text-center ".concat(n||""),children:(0,s.jsx)(C,{type:"collateralValue",marketId:t,collateralTokenBalance:a})}),(0,s.jsxs)("div",{className:"text-[#F5F5F5]/50 text-xs text-center",children:[(0,s.jsx)(C,{type:"collateralTokens",marketId:t,collateralTokenBalance:a})," ","wstETH"]})]}),(0,s.jsxs)("div",{className:"bg-black p-3",children:[(0,s.jsx)("div",{className:"text-[#F5F5F5]/70 text-xs mb-1 text-center",children:"Pegged Tokens"}),(0,s.jsx)("div",{className:"text-2xl font-medium text-center ".concat(n||""),children:(0,s.jsx)(C,{type:"peggedValue",marketId:t,collateralTokenBalance:a})}),(0,s.jsxs)("div",{className:"text-[#F5F5F5]/50 text-xs text-center",children:[(0,s.jsx)(C,{type:"peggedTokens",marketId:t,collateralTokenBalance:a})," ","tokens"]})]}),(0,s.jsxs)("div",{className:"bg-black p-3",children:[(0,s.jsx)("div",{className:"text-[#F5F5F5]/70 text-xs mb-1 text-center",children:"Leveraged Tokens"}),(0,s.jsx)("div",{className:"text-2xl font-medium text-center ".concat(n||""),children:(0,s.jsx)(C,{type:"leveragedValue",marketId:t,collateralTokenBalance:a})}),(0,s.jsxs)("div",{className:"text-[#F5F5F5]/50 text-xs text-center",children:[(0,s.jsx)(C,{type:"leveragedTokens",marketId:t,collateralTokenBalance:a})," ","tokens"]})]}),(0,s.jsxs)("div",{className:"bg-black p-3",children:[(0,s.jsx)("div",{className:"text-[#F5F5F5]/70 text-xs mb-1 text-center",children:"Collateral Ratio"}),(0,s.jsx)("div",{className:"text-2xl font-medium text-center ".concat(n||""),children:(0,s.jsx)(C,{type:"collateralRatio",marketId:t})}),(0,s.jsx)("div",{className:"text-[#F5F5F5]/50 text-xs text-center",children:"Target: 150%"})]}),(0,s.jsxs)("div",{className:"bg-black p-3 flex flex-col items-center justify-center",children:[(0,s.jsx)("div",{className:"text-[#F5F5F5]/70 text-xs mb-1 text-center",children:"Price Oracle"}),(0,s.jsx)("div",{className:"text-2xl Price Oracle font-medium text-center ".concat(n||""),children:"Chainlink"}),(0,s.jsx)("div",{className:"text-[#F5F5F5]/50 text-xs mt-0.5 text-center",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[u,d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(d)},title:"Copy Oracle Address",className:"text-[#F5F5F5]/50 hover:text-[#F5F5F5]/70 transition-colors",children:(0,s.jsx)("svg",{className:"w-2.5 h-2.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,s.jsx)("a",{href:"https://etherscan.io/address/".concat(d),target:"_blank",rel:"noopener noreferrer",title:"View Oracle on Etherscan",className:"text-[#F5F5F5]/50 hover:text-[#F5F5F5]/70 transition-colors",children:(0,s.jsx)("svg",{className:"w-2.5 h-2.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]})]})})]})]})}):null},{Value:C});let E=e=>e?parseFloat(e).toString():"0",D=e=>{if((null==e?void 0:e.status)==="success"&&"bigint"==typeof(null==e?void 0:e.result))return e.result};Object.assign(T,{Value:e=>{let{type:t,marketId:a,collateralTokenBalance:n,collateralAllowance:l,peggedAllowance:r,leveragedAllowance:i,totalCollateralValue:c,collateralRatio:d,peggedTokenData:u,leveragedTokenData:m,priceData:x,leveragedTokenPrice:p}=e;return(0,s.jsx)(s.Fragment,{children:(()=>{switch(t){case"collateralValue":return c||"0";case"collateralTokens":return E(n);case"collateralRatio":return d?"".concat(d,"%"):"0%";case"peggedValue":case"peggedTokens":{let e=(null==u?void 0:u[0])&&D(u[0]);if(!e)return"0";let a=Number((0,o.d)(e));return console.log("Raw pegged balance:",e.toString()),console.log("Formatted pegged balance:",a),"peggedValue"===t?a.toFixed(2):a.toFixed(4)}case"leveragedValue":{let e=(null==m?void 0:m[0])&&D(m[0]);if(!e||!p)return"0";return(Number(e)*Number(p)/1e36).toFixed(2)}case"leveragedTokens":{let e=(null==m?void 0:m[0])&&D(m[0]);if(!e)return"0";if("leveragedTokens"===t){let t=Number((0,o.d)(e));return console.log("Raw leveraged balance:",e.toString()),console.log("Formatted leveraged balance:",t),t.toFixed(4)}let a=(null==m?void 0:m[1])&&D(m[1]);if(!a||!x)return"0";return(Number((0,o.d)(e))*Number((0,o.d)(a))*Number((0,o.d)(x))/1e8).toFixed(2)}default:return"0"}})()})}});let B={LONG:["zheUSD"]};function O(){let[e,t]=(0,r.useState)(!1),{address:a,isConnected:n}=(0,i.useAccount)(),{chain:o}=(0,i.useNetwork)(),[m,x]=(0,r.useState)("steth-usd"),[p,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>t(!0),[]);let f=(0,r.useMemo)(()=>c.Uu[m],[m]);return B.LONG[0],console.log("[DEBUG page.tsx] geo.className:",l().className),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(F(),{children:[(0,s.jsx)("title",{children:"Zhenglong"}),(0,s.jsx)("meta",{name:"description",content:"Zhenglong App"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)("div",{className:"fixed inset-0 pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute top-[15%] left-[20%] w-[600px] h-[400px] bg-[#4A7C59]/[0.06]"}),(0,s.jsx)("div",{className:"absolute top-[25%] right-[15%] w-[500px] h-[450px] bg-[#4A7C59]/[0.05]"}),(0,s.jsx)("div",{className:"absolute top-[20%] left-[35%] w-[400px] h-[300px] bg-[#4A7C59]/[0.07]"}),(0,s.jsx)("div",{className:"absolute top-[22%] left-[10%] w-[300px] h-[250px] bg-[#4A7C59]/[0.04] animate-float-1"}),(0,s.jsx)("div",{className:"absolute top-[28%] right-[25%] w-[280px] h-[320px] bg-[#4A7C59]/[0.045] animate-float-2"}),(0,s.jsx)("div",{className:"absolute top-[35%] left-[40%] w-[350px] h-[280px] bg-[#4A7C59]/[0.055] animate-float-3"}),(0,s.jsx)("div",{className:"absolute top-[30%] left-[28%] w-[250px] h-[200px] bg-[#4A7C59]/[0.065] animate-float-4"}),(0,s.jsx)("div",{className:"absolute top-[25%] right-[30%] w-[220px] h-[180px] bg-[#4A7C59]/[0.05] animate-float-1"}),(0,s.jsx)("div",{className:"absolute top-[40%] left-[15%] w-[280px] h-[240px] bg-[#4A7C59]/[0.06] animate-float-2"}),(0,s.jsx)("div",{className:"absolute top-[20%] left-[45%] w-[120px] h-[120px] bg-[#4A7C59]/[0.075] animate-steam-1"}),(0,s.jsx)("div",{className:"absolute top-[35%] right-[40%] w-[150px] h-[150px] bg-[#4A7C59]/[0.07] animate-steam-2"}),(0,s.jsx)("div",{className:"absolute top-[30%] left-[25%] w-[100px] h-[100px] bg-[#4A7C59]/[0.08] animate-steam-3"}),(0,s.jsx)("div",{className:"absolute top-[25%] right-[20%] w-[80px] h-[80px] bg-[#4A7C59]/[0.065] animate-steam-1"}),(0,s.jsx)("div",{className:"absolute top-[45%] left-[30%] w-[90px] h-[90px] bg-[#4A7C59]/[0.075] animate-steam-2"}),(0,s.jsx)("div",{className:"absolute top-[38%] right-[35%] w-[110px] h-[110px] bg-[#4A7C59]/[0.07] animate-steam-3"})]}),(0,s.jsx)(u.Z,{}),(0,s.jsxs)("main",{className:"container mx-auto px-6 pt-28 pb-20 relative z-10",children:[(0,s.jsxs)("div",{className:"text-center mb-10",children:[(0,s.jsx)("h1",{className:"text-4xl text-[#4A7C59] ".concat(l().className),children:"Mint & Redeem"}),(0,s.jsx)("p",{className:"text-[#F5F5F5]/60 text-sm mt-2",children:"Mint or redeem pegged and leverage tokens from any market"})]}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto mb-8",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-1"}),(0,s.jsxs)("div",{className:"flex items-center gap-4 w-[200px] justify-end relative",children:[(0,s.jsx)("label",{className:"text-[#F5F5F5]/70",children:"Market"}),(0,s.jsx)("button",{onClick:()=>{g(!0),setTimeout(()=>{g(!1)},2500)},className:"px-4 py-2 bg-[#202020] text-[#F5F5F5] border border-[#4A7C59]/30 hover:border-[#4A7C59] hover:bg-[#2A2A2A] outline-none transition-all text-left w-[120px]",children:f.name}),p&&(0,s.jsx)("div",{className:"absolute top-full right-0 mt-2 px-4 py-2 bg-[#4A7C59] text-white shadow-lg whitespace-nowrap z-50 ".concat(l().className," animate-fade-out"),children:"New markets coming soon!"})]})]})}),(0,s.jsx)("div",{className:"mb-8",children:e&&f&&(0,s.jsx)(T,{marketId:m,geoClassName:l().className})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-stretch min-h-[700px]",children:[(0,s.jsx)("div",{className:"h-full",children:e&&f?(0,s.jsx)("div",{className:"bg-[#0A0A0A] p-0 shadow-custom-dark h-full",children:(0,s.jsx)(N,{geoClassName:l().className,currentMarket:f,isConnected:n,userAddress:a})}):(0,s.jsx)("div",{className:"bg-[#0A0A0A] p-6 shadow-custom-dark h-full",children:(0,s.jsx)("h2",{className:"text-2xl text-[#F5F5F5] mb-4 ".concat(l().className),children:"Loading Form..."})})}),(0,s.jsx)("div",{className:"h-full",children:e&&f?(0,s.jsx)("div",{className:"bg-[#0A0A0A] p-6 shadow-custom-dark h-full flex flex-col",children:(0,s.jsx)("div",{className:"flex-1 min-h-0",children:(0,s.jsx)(d,{symbol:"BITSTAMP:ETHUSD",theme:"dark"})})}):(0,s.jsx)("div",{className:"bg-[#0A0A0A] p-6 shadow-custom-dark text-center h-full",children:"Loading Price Chart..."})})]})]})]})}},5523:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var s=a(3827),n=a(5903),l=a.n(n),r=a(3902),i=a(4090);function o(){let{address:e,isConnected:t}=(0,r.useAccount)(),{connect:a,connectors:n,error:o,isLoading:c,pendingConnector:d}=(0,r.useConnect)(),[u,m]=(0,i.useState)(!1);(0,i.useEffect)(()=>{m(!0)},[]);let x=async()=>{let e=n[0];if(e)try{await a({connector:e})}catch(e){console.error("Failed to connect:",e)}else console.error("No injected connector found")};return u?(0,s.jsx)("button",{onClick:x,disabled:c,className:"".concat(c?"bg-[#3A6147] cursor-wait":"bg-[#4A7C59] hover:bg-[#3A6147]"," px-6 py-2 text-white text-lg tracking-wider transition-all uppercase ").concat(l().className),children:c?"Connecting to ".concat((null==d?void 0:d.name)||"wallet","..."):t?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"Connect Wallet"}):(0,s.jsx)("button",{className:"bg-[#4A7C59] hover:bg-[#3A6147] px-6 py-2 text-white text-lg tracking-wider transition-all uppercase ".concat(l().className),children:"Connect Wallet"})}},3170:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var s=a(3827),n=a(4967),l=a.n(n),r=a(8792),i=a(703),o=a(5523);function c(){return(0,s.jsx)("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-[#1A1A1A]/90 backdrop-blur-sm border-b border-[#4A7C59]/20",children:(0,s.jsx)("div",{className:"container mx-auto px-6",children:(0,s.jsxs)("div",{className:"flex items-center h-20",children:[(0,s.jsxs)(r.default,{href:"/",className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-20 h-18 flex items-center justify-center",children:(0,s.jsx)(i.default,{src:"/logo.svg",alt:"Zhenglong Protocol",width:80,height:70,className:"w-full h-full"})}),(0,s.jsx)("span",{className:"text-3xl tracking-wider text-[#4A7C59] ".concat(l().className),children:"zhenglong"})]}),(0,s.jsx)("div",{className:"flex-1 flex justify-center",children:(0,s.jsxs)("div",{className:"flex items-center gap-12",children:[(0,s.jsx)(r.default,{href:"/app",className:"text-xl text-white hover:text-white/80 transition-colors ".concat(l().className),children:"Mint/Redeem"}),(0,s.jsx)(r.default,{href:"/earn",className:"text-xl text-white hover:text-white/80 transition-colors ".concat(l().className),children:"Earn"}),(0,s.jsx)(r.default,{href:"/vote",className:"text-xl text-white hover:text-white/80 transition-colors ".concat(l().className),children:"Vote"}),(0,s.jsx)(r.default,{href:"/genesis",className:"text-xl text-white hover:text-white/80 transition-colors ".concat(l().className),children:"Genesis"}),(0,s.jsx)(r.default,{href:"/staking",className:"text-xl text-white hover:text-white/80 transition-colors ".concat(l().className),children:"Staking"})]})}),(0,s.jsx)(o.Z,{})]})})})}},2829:function(e,t,a){"use strict";a.d(t,{Uu:function(){return s}});let s={"steth-usd":{id:"steth-usd",name:"stETH/USD",description:"Lido Staked ETH / US Dollar",addresses:{collateralToken:"0x7f39C581F595B53c5cb19bD0b3f8dA6c935E2Ca0",feeReceiver:"0x99aA73dA6309b8eC484eF2C95e96C131C1BBF7a0",genesis:"0xEd3AAE51d33138ef67555AE0925A38E77Df5B7e0",leveragedToken:"0xAf7868a9BB72E16B930D50636519038d7F057470",minter:"0x3aD2306eDfBe72ce013cdb6b429212d9CdDE4F96",owner:"0xFC69e0a5823E2AfCBEb8a35d33588360F1496a00",peggedToken:"0x7945b0A6674b175695e5d1D08aE1e6F13744Abb0",priceOracle:"0x97541208c6C8ecfbe57B8A44ba86f2A88bA783e2",rebalancePoolCollateral:"0x37e2156B0d78098F06F8075a18d7E3a09483048e",rebalancePoolLeveraged:"0xfC47d03bd4C8a7E62A62f29000ceBa4D84142343",reservePool:"0xFBc00Fa47a7d3bbE3e82B5Aa560B47008c1bD64c",collateralPrice:"0xCfE54B5cD566aB89272946F602D76Ea879CAb4a8"},genesis:{startDate:"2024-03-21T00:00:00Z",endDate:"2024-03-22T20:15:00Z",rewards:{pegged:{symbol:"zheUSD",amount:"1000000"},leveraged:{symbol:"steamedETH",amount:"1000000"}},collateralRatio:1,leverageRatio:1}}};s["steth-usd"],s["steth-usd"].addresses},7681:function(e){e.exports={style:{fontFamily:"'__Geo_ea146f', '__Geo_Fallback_ea146f'",fontWeight:400,fontStyle:"normal"},className:"__className_ea146f"}},5903:function(e){e.exports={style:{fontFamily:"'__Geo_ea146f', '__Geo_Fallback_ea146f'",fontWeight:400,fontStyle:"normal"},className:"__className_ea146f"}},4967:function(e){e.exports={style:{fontFamily:"'__Geo_ea146f', '__Geo_Fallback_ea146f'",fontWeight:400,fontStyle:"normal"},className:"__className_ea146f"}},3910:function(e,t,a){"use strict";a.d(t,{f:function(){return l}});var s=a(4817),n=a(73);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wei";return(0,n.v)(e,s.ez[t])}}},function(e){e.O(0,[902,607,971,69,744],function(){return e(e.s=6592)}),_N_E=e.O()}]);